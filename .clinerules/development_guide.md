# Критически важно
- САМОЕ ГЛАВНОЕ: задача считается решенной если код компилируется и запускается (тесты или примеры программ)
всегда проверяй что новый код импортируется и реально запускается а не просто лежит в папке не включенный в зависимости проекта

- в конце рассуждений о проекте и предоставлении сводки перед тем как реализовывать всегда спрашивай
"составить пошаговый план где в каждом шаге можно подтверить корректность комиляцией и или даже запуском?" если ответят положительно или перейдут в ACT mode , то предоставить план и следовать ему.

- после решения задачи перед тем как отчитаться о выполнении сам себе задай вопрос, какие были условия и требования задачи и выполнены ли они полностью

- показывай уведомления и в режиме планирования, когда закончил анализ задачи

- читай код проекта, особенно зависимости которые находятся в папке проекта

- для проверки ошибок комплияции тестов используй cargo check --tests


# Руководство по разработке NetCom

Этот файл содержит правила и рекомендации по разработке для проекта NetCom - P2P сети на Rust с Python биндингами.

## Communication style
- Использовать русский язык для общения, когда пользователь начинает на русском
- Быть прямым и техническим в ответах, избегая излишней разговорности
- Предоставлять четкие объяснения технических решений и реализаций
- задавать уточняющие вопросы при планировании, придерживаться принципа keep it simple keep it done

## Development workflow
- Всегда писать тесты по одному и сразу запускать их для проверки
- Никогда не использовать заглушки или моки в тестах - только реальные компоненты и функциональность
- Никогда не генерировать HTML через tarpaulin - использовать lcov для отчетов о покрытии кода
- **Никогда не удалять функционал из кода, даже если он не покрыт тестами, без явного указания пользователя**

## Coding best practices
- Писать идиоматический Rust код, следуя стандартам Rust 2024 edition
- Использовать async/await паттерны с tokio для всех сетевых операций
- Реализовывать комплексную обработку ошибок для всех возможных сценариев сбоев
- Следовать модульной архитектуре: protocols/ для базовых протоколов, xnetwork2/ для высокоуровневого сетевого кода, pyxnetwork/ для Python биндингов

## Testing strategy
- Писать интеграционные тесты, использующие реальные сетевые компоненты
- Тестировать двунаправленную потоковую передачу данных с реальными объектами XStream
- Включать тестирование граничных случаев для сетевых таймаутов и условий ошибок
- Организовывать тесты в выделенных модулях под директорией src/tests/
- Использовать описательные имена тестов по шаблону: test_functionality_scenario
- Все тесты должны проверять реальную функциональность кода, а не симулировать ее
- При написании кода сразу писать рабочий код без заглушек и симуляций, если не указано иное
- **Запрет на "мягкие" обработки ошибок** - вместо `println!` с предупреждениями использовать `panic!` при невыполнении ожидаемых условий
- **Строгая валидация условий** - тесты должны немедленно останавливаться при несовпадении условий с ожидаемыми
- **Проверка целостности данных** - в тестах передачи данных обязательно проверять, что полученные данные совпадают с отправленными

## Documentation standards
- Документировать все публичные API с четкими примерами
- Включать русские комментарии, когда это уместно для контекста пользователя
- Поддерживать комплексный контекст проекта для помощи ai ассистента в ai_help/project_context.md

