XStream - протокол расширенных потоков. предназначен для удобной сетевой коммуникации в стиле RPC. основное преимущество удобная обработка ошибок за счет создания дополнительного потока ошибок, который гарантирует своевременное определение ошибок отправленных сервером.

используя xstream можно реализовать различные варианты взаимодействия:
* стандартный запрос-ответ
* одно или двусторонний обмен потоком байтов
* одно или двусторонний обмен сообщениями

XStream состоит из дву потоков libp2p::Stream, один двунаправленный для данных, другой однонаправленный для ошибок ()от сервера к клиенту

основные методы работы с данными:
    * read()  чтение скольки то данных
    * read_exact(n) - чтение n байт
    * read_to_end() - чтение  до конца строки
    * write_all() - записать байты
    * write() - записать байты
    * flush() - ожидать фактической отправки данных из буферов

    * write_eof - для того что бы закрыть запись данных и принимающая сторона получила eof

.close() - закрыть xstream полностью, принимающую и отправляющую части

работа с ошибками
write_error(with_data_flush=flase) - записать ошибку, отправить данные ошибки (flush) и опционально, перед закрытием потока отправить остатки данных, закрыть все потоки на чтение и запись, как данных так и ошибок

read_error() ждет ошибку - байты до eof



еще один метод read_after_error - позволяет дочитать поток данных до eof (или любой ошибки чтения) без возврата ошибки, просто пустая строка или полученный буфер
этот метод можно использовать только если на сервере был вызван write_error
или на клиенте был получен через read_error


логика работы при полученной ошибке:
полученная ошибка должна сохраниться,
повторный вызов read_error вернет сохраненную ошибку, так как по потоку ошибок может придти только один блок данных заканчивающийся eof
нельзя записать ошибку дважды







